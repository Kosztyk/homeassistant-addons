name: "ConvertX"
slug: "convertx"
version: "user"
description: "ConvertX file converter with ClamAV API integration"
arch:
  - amd64

startup: application
boot: auto

# Build our own add-on image based on your ConvertX image
image: "kosztyk/convertx-clamav"

# No ingress, use direct http://HA-IP:8080
ingress: false

ports:
  "3000/tcp": 8080
ports_description:
  "3000/tcp": "ConvertX Web UI (mapped to 8080)"

webui: "http://[HOST]:[PORT:3000]/"

# Map Home Assistant's persistent data *directly* to /app/data
# This is where ConvertX stores its SQLite database.
map:
  - type: data
    read_only: false
    path: /app/data

options:
  # Leave empty by default, you set this in the GUI
  jwt_secret: ""
  http_allowed: true
  tz: "Europe/Bucharest"
  auto_delete_hours: 720
  clamav_url: "http://172.0.0.1:3000/api/v1/scan"
  account_registration: true
  allow_unauthenticated: true

schema:
  jwt_secret: "str?"
  http_allowed: bool
  tz: str
  auto_delete_hours: int
  clamav_url: str
  account_registration: bool
  allow_unauthenticated: bool
